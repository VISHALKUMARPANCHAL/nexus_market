<?php
$images = $this->getImages();
// echo '<pre>';
// print_r($images);
// echo '</pre>';
?>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<style>
:root {
    --swiper-theme-color: #ffffff;
}

.hero-swiper {
    height: 70vh;
    width: 100%;
}

.hero-slide::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.1) 100%);
    z-index: 1;
}

.hero-content {
    z-index: 2;
}

.collection-slide img {
    transition: transform 0.5s ease;
}

.collection-slide:hover img {
    transform: scale(1.05);
}

.animate-fade-up {
    animation: fadeUp 0.8s ease forwards;
}

@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
</head>

<div class="swiper hero-swiper">
    <div class="swiper-wrapper">
        <?php foreach ($images as $image): ?>
        <div class="swiper-slide hero-slide position-relative d-flex align-items-center justify-content-center">
            <img src="<?php echo Mage::getBaseUrl() . $image->getFilePath() ?>" alt="<?php echo $image->getName(); ?>"
                class="position-absolute w-100 h-100 object-fit-cover">
            <div class="hero-content container text-white text-center position-relative px-4">
                <h1 class="display-4 fw-bold mb-3"><?php echo $image->getName() ?></h1>
                <div class="d-flex justify-content-center align-items-center gap-3 mb-3">
                    <span class="fs-4 fw-bold">₹<?php echo $image->getPrice() ?></span>
                    <span class="text-decoration-line-through text-light">₹<?php echo $image->getPrice() * 1.2 ?></span>
                    <span class="badge bg-warning text-dark">20% OFF</span>
                </div>
                <div class="d-flex justify-content-center gap-3">
                    <a href="<?php echo Mage::getBaseUrl() ?>catalog/product/view/?id=<?php echo $image->getProductId() ?>"
                        class="btn btn-primary btn-lg px-4">Shop Now</a>
                    <a href="<?php echo Mage::getBaseUrl() ?>catalog/product/list"
                        class="btn btn-outline-light btn-lg px-4">Learn
                        More</a>
                </div>
            </div>
        </div>
        <?php endforeach; ?>
    </div>
    <div class="swiper-pagination"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
</div>
<div class="py-5">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-6 text-center">
                <h6 class="text-primary fw-bold mb-2">DISCOVER OUR COLLECTION</h6>
                <h2 class="display-6 fw-bold mb-3">Popular Products</h2>
                <div class="d-flex justify-content-center">
                    <div class="border-bottom border-primary border-3 w-25 mb-4"></div>
                </div>
            </div>
        </div>

        <div class="swiper collection-swiper rounded-4 shadow-lg overflow-hidden">
            <div class="swiper-wrapper">

                <?php foreach ($images as $image): ?>
                <div class="swiper-slide collection-slide position-relative bg-white p-3 rounded-4"
                    style="height: 450px;">
                    <a
                        href="<?php echo Mage::getBaseUrl() ?>catalog/product/view/?id=<?php echo $image->getProductId() ?>">
                        <div class="h-75 d-flex justify-content-center align-items-center overflow-hidden rounded-3">
                            <img src="<?php echo Mage::getBaseUrl() . $image->getFilePath() ?>"
                                alt="<?php echo $image->getName(); ?>" class="w-auto h-100 object-fit-cover">
                        </div>
                        <div class="position-absolute bottom-0 start-50 translate-middle-x bg-dark bg-opacity-75 text-white text-center p-3 rounded-3 shadow-sm"
                            style="width: 60%;">
                            <h3 class="fw-bold fs-5 mb-1"><?php echo $image->getName() ?></h3>
                            <!-- <div class="d-flex justify-content-center align-items-center gap-2 mb-2">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-half text-warning"></i>
                                <span class="ms-1 small">(124)</span>
                            </div> -->
                            <p class="fw-bold mb-2">₹<?php echo $image->getPrice() ?> <span
                                    class="text-decoration-line-through text-light small">₹<?php echo $image->getPrice() * 1.2 ?></span>
                            </p>
                            <!-- <button class="btn     btn-sm btn-primary">Add to Cart</button> -->
                            <!-- <button class="btn btn-sm btn-outline-light ms-1"><i class="bi bi-heart"></i></button> -->
                        </div>
                    </a>
                </div>
                <?php endforeach; ?>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-next text-primary"></div>
            <div class="swiper-button-prev text-primary"></div>
        </div>
    </div>
</div>


<div class="py-5 bg-white">
    <div class="container py-4">
        <div class="row g-4">
            <div class="col-md-3">
                <div class="text-center p-4">
                    <i class="bi bi-truck text-primary display-4 mb-3"></i>
                    <h5 class="fw-bold">Free Shipping</h5>
                    <p class="text-muted small mb-0">On all orders over ₹1000</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center p-4">
                    <i class="bi bi-shield-check text-primary display-4 mb-3"></i>
                    <h5 class="fw-bold">Secure Payment</h5>
                    <p class="text-muted small mb-0">100% secure payment</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center p-4">
                    <i class="bi bi-arrow-repeat text-primary display-4 mb-3"></i>
                    <h5 class="fw-bold">Easy Returns</h5>
                    <p class="text-muted small mb-0">10 days return policy</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="text-center p-4">
                    <i class="bi bi-headset text-primary display-4 mb-3"></i>
                    <h5 class="fw-bold">24/7 Support</h5>
                    <p class="text-muted small mb-0">Dedicated support</p>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
var heroSwiper = new Swiper(".hero-swiper", {
    slidesPerView: 1,
    spaceBetween: 0,
    autoplay: {
        delay: 5000,
        disableOnInteraction: false,
    },
    pagination: {
        el: ".swiper-pagination",
        clickable: true,
    },
    navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
    },
    loop: true,
    effect: "fade",
    fadeEffect: {
        crossFade: true
    },
    on: {
        slideChangeTransitionStart: function() {
            document.querySelectorAll('.hero-content').forEach(function(content) {
                content.classList.remove('animate-fade-up');
            });
        },
        slideChangeTransitionEnd: function() {
            let activeSlide = document.querySelector('.swiper-slide-active .hero-content');
            if (activeSlide) {
                activeSlide.classList.add('animate-fade-up');
            }
        },
    }
});

var collectionSwiper = new Swiper(".collection-swiper", {
    slidesPerView: 3,
    spaceBetween: 20,
    autoplay: {
        delay: 3000,
        disableOnInteraction: false,
    },
    pagination: {
        el: ".swiper-pagination",
        clickable: true,
    },
    navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
    },
    loop: true,
    // breakpoints: {
    //     // when window width is <= 576px
    //     576: {
    //         slidesPerView: 1,
    //         spaceBetween: 10
    //     },
    //     // when window width is <= 768px
    //     768: {
    //         slidesPerView: 2,
    //         spaceBetween: 15
    //     },
    //     // when window width is <= 992px
    //     992: {
    //         slidesPerView: 3,
    //         spaceBetween: 20
    //     }
    // }
});

// Initialize hero animation
document.addEventListener('DOMContentLoaded', function() {
    let activeSlide = document.querySelector('.swiper-slide-active .hero-content');
    if (activeSlide) {
        activeSlide.classList.add('animate-fade-up');
    }
});
</script>